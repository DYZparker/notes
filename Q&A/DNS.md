





### 简述dns作用

DNS服务器是计算机域名系统 (Domain Name System 或Domain Name Service) 的缩写，它是由域名解析器和域名服务器组成的。域名服务器是指保存有该网络中所有主机的域名和对应IP地址，并具有将域名转换为IP地址功能的服务器。其中域名必须对应一个IP地址，而IP地址不一定有域名。域名系统采用类似目录树的等级结构。域名服务器为客户机/服务器模式中的服务器方，它主要有两种形式：主服务器和转发服务器。将域名映射为IP地址的过程就称为“域名解析”。
DNS（domain name system）域名系统或者（domain named system）区域名称服务，分为正向与反向域名解析，适用C/S,端口路53/udp，53/tcp，属于应用层协议；　　作用：人得记忆有限，如果没有dns得记下多少IP地址；从网络来说由于tcp/ip协议族是基于ip地址，所以需要一个翻译器即DNS；可以1对多也可以多对1，那么正向解析即域名解析为ip地址，反向解析即ip地址解析为域名。有人说DNS就是一个本大得电话本，说的挺贴切。　　正反向解析事两个不同得名称空间，是两颗不同得解析树；　　正向：ip—》主机名　　反向：主机名—》ip　　当今得业界标准BIND（berkeley internet name domain）dns软件
DNS域名
DNS是一个倒挂树结构示意图如下

1） 按照功能命名得五个类别介绍
　　根域：DNS域名中使用时，规定由尾部据点（.）来指定名称位于根域或更高级别得域层次结构，（.） 　　 　　
　　顶级域：TDL(TOP LEVEL DOMAIN)用来只是某个国家地区或组织使用得类型，例如(.com) 　　
　　二级域：个人或组织在internet上使用得注册名称，例如163.com
　　子域：已经注册二级域名派生得域名，就是网站名，例如www.163.co
　　主机名：通常情况下，DNS域名得最左侧得标签表示网络上得特定计算机，如www，mail，zhidao
　　名称服务器：域内负责解析本域内的名称的主机
　　根服务器：13组服务器
2）dns和internet域
　　互联网域名系统有名称注册机构负载维护分配有组织和国家/地区得顶级域在internet上进行管理。国际标准3166。
　　　　常见得DNS域名
　　　　com，商业公司
　　　　edu，教育机构　　　
　　　　net，网络公司　　
　　　　gov，非军事政府机构　　　
　　　　mil，军事政府机构　　　　
　　　　cn，代表中国
DNS服务器类型　　
　　主DNS服务器　　
　　从DNS服务器 （可以是多个提供容错）　　
　　缓存DNS服务器（转发器）　　　　
　　主DNS服务器：管理和维护所负责解析的域内解析库的服务器　　
　　从DNS服务器：从主服务器或从服务器“复制”（区域传输）解析库副本　　
　1)复制操作的方式　　
　　序列号serial：解析库版本号，主服务器解析库变化时，其序列递增　　　
　　刷新时间间隔refresh：从服务器从主服务器请求同步解析的时间间隔　　
　　重试时间间隔retry：从服务器请求同步失败时，再次尝试时间间隔　　
　　过期时长expire：从服务器始终联系不到服务器时，多久后放弃从服务器角度，停止提供服务　　
　　否定答案的缓存时长；minimum　　
　　”通知“机制:主服务器解析库发送变化时，会主动通知从服务　　
2）区域传送　　　　
　　完全传输axfr：传送整个解析库　　　　
　　增量传输lxfr：传递解析库变化的那部分内容　　
3）区域（zone）和域（domain）
　　　　　Domain：FQDN　　　
　　　　　正向：FQDN->IP　　
　　　　　反向：IP->FQDN　　　
　　　　　各需要一个解析库来分别负责本地域名的的正向和反向解析库　　　　
　　　　　正向区域　　　
　　　　　反向区域　　　
　　　　　FQDN:fullqualified domain name 完全限定域名　　　　
　　　　　　　如：www.nxtc.edu.cn

### DNS查询解析

我们在浏览器访问www.nxtc.edu.cn这个域名，dns怎么查询到这台主机那？　　　　
1)在浏览器中输入www.nxtc.edu.cn域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个ip地址映射，完成域名解析。　　
2)如果hosts里没有这个域名的映射，则会查找本地DNS解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析。　　
3)如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/IP参数中设置的首选DNS服务器，在此我们叫它本地DNS服务器，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析记过给客户端，完成域名解析，此解析具有权威性。　　
4)如果要查询域名，不由本地DNS服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。　　
5)如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，本地DNS就把请求发至13台根DNS，根DNS服务器收到请求后会判断这个域名（.cn）是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.cn域的这台服务器。这台负责.cn域的服务器收到请求后，如果自己无法解析，它就会找一个管理.cn域的下一级DNS服务器地址（edu.cn）给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找edu.cn域服务器，重复上面的动作，进行查询，直至找到www.nxtc.edu.cn主机。　　
6)如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把请求转至上上级，以此循环。不管是本地DNS服务器用是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机。

详细描述域名劫持攻击的过程及防御方式。
域名劫持攻击的过程：
1、用户终端Dns劫持
2、路由器Dns劫持
3、运营商Dns劫持
防御方式：
1.修改用户Dns，推荐google和阿里云，此时有可能用户终端运行了恶意软件，建议用安全软件全盘扫描一遍。
2．修改路由器Dns，Dns修改方案见1，此时路由器可能遭黑客入侵，建议尽快升级路由器固件以及修改路由器用户密码或更换升级路由器设备
3.向运营商反应情况，寻求帮助，或者向有关政府部门投诉，或更改宽带运营商防御方式